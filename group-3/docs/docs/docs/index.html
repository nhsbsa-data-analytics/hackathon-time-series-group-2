<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Correlation Analysis in Time Series data using R</title>

<script src="site_libs/header-attrs-2.11/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<link href="site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="site_libs/plotly-main-2.5.1/plotly-latest.min.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Time series analysis in R</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="forecasting.html">Forecasting</a>
</li>
<li>
  <a href="index.html">Correlation</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Correlation Analysis in Time Series data using R</h1>

</div>


<div id="httpswww.lobdata.com.br20200915how-to-perform-correlation-analysis-in-time-series-data-using-r" class="section level2">
<h2><a href="https://www.lobdata.com.br/2020/09/15/how-to-perform-correlation-analysis-in-time-series-data-using-r/" class="uri">https://www.lobdata.com.br/2020/09/15/how-to-perform-correlation-analysis-in-time-series-data-using-r/</a></h2>
</div>
<div id="first-approach" class="section level1">
<h1>First Approach</h1>
<p>The first method that I want to show you use the ts object, a built-in format in R for time series. I choose this approach because with the ts object we have a good integration with TSstudio package and nice interactive functions to use.</p>
<div id="view-time-series" class="section level3">
<h3>View time series</h3>
<pre class="r"><code>ts_info(stackOverflow_ts)</code></pre>
<pre><code>##  The stackOverflow_ts series is a mts object with 2 variables and 132 observations
##  Frequency: 12 
##  Start time: 2009 1 
##  End time: 2019 12</code></pre>
</div>
<div id="visualise-the-time-series" class="section level3">
<h3>Visualise the time series</h3>
<pre class="r"><code>ts_plot(stackOverflow_ts,
        title = &quot;Monthly questions on Stack Overflow platform&quot;,
        Ytitle = &quot;# Questions&quot;,
        Xtitle = &quot;Year&quot;)</code></pre>
<div id="htmlwidget-a8cd99d5fe2577562e9e" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-a8cd99d5fe2577562e9e">{"x":{"visdat":{"32b82bc63a0e":["function () ","plotlyVisDat"]},"cur_data":"32b82bc63a0e","attrs":{"32b82bc63a0e":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":[2009,2009.08333333333,2009.16666666667,2009.25,2009.33333333333,2009.41666666667,2009.5,2009.58333333333,2009.66666666667,2009.75,2009.83333333333,2009.91666666667,2010,2010.08333333333,2010.16666666667,2010.25,2010.33333333333,2010.41666666667,2010.5,2010.58333333333,2010.66666666667,2010.75,2010.83333333333,2010.91666666667,2011,2011.08333333333,2011.16666666667,2011.25,2011.33333333333,2011.41666666667,2011.5,2011.58333333333,2011.66666666667,2011.75,2011.83333333333,2011.91666666667,2012,2012.08333333333,2012.16666666667,2012.25,2012.33333333333,2012.41666666667,2012.5,2012.58333333333,2012.66666666667,2012.75,2012.83333333333,2012.91666666667,2013,2013.08333333333,2013.16666666667,2013.25,2013.33333333333,2013.41666666667,2013.5,2013.58333333333,2013.66666666667,2013.75,2013.83333333333,2013.91666666667,2014,2014.08333333333,2014.16666666667,2014.25,2014.33333333333,2014.41666666667,2014.5,2014.58333333333,2014.66666666667,2014.75,2014.83333333333,2014.91666666667,2015,2015.08333333333,2015.16666666667,2015.25,2015.33333333333,2015.41666666667,2015.5,2015.58333333333,2015.66666666667,2015.75,2015.83333333333,2015.91666666667,2016,2016.08333333333,2016.16666666667,2016.25,2016.33333333333,2016.41666666667,2016.5,2016.58333333333,2016.66666666667,2016.75,2016.83333333333,2016.91666666667,2017,2017.08333333333,2017.16666666667,2017.25,2017.33333333333,2017.41666666667,2017.5,2017.58333333333,2017.66666666667,2017.75,2017.83333333333,2017.91666666667,2018,2018.08333333333,2018.16666666667,2018.25,2018.33333333333,2018.41666666667,2018.5,2018.58333333333,2018.66666666667,2018.75,2018.83333333333,2018.91666666667,2019,2019.08333333333,2019.16666666667,2019.25,2019.33333333333,2019.41666666667,2019.5,2019.58333333333,2019.66666666667,2019.75,2019.83333333333,2019.91666666667],"y":[631,633,766,768,1003,1046,1165,1143,1169,1424,1562,1552,1952,1872,2076,1817,2017,2214,2607,2498,2254,2671,2619,2441,2913,3024,3763,3359,3538,3485,3688,3849,3526,3639,3889,3555,4232,4517,5073,4948,5133,5295,5751,5882,5273,6154,6408,5636,6605,6793,7680,7975,7862,7640,8656,7974,7999,9539,9546,8306,9892,9951,11483,10839,9330,8967,9999,9170,8829,9651,9652,8886,9757,10264,11685,11522,11286,11887,12392,11296,11040,12578,12384,11446,12439,13334,14173,13775,13207,13009,12943,13006,12424,13616,14296,12889,14388,14901,17280,15752,16291,16173,17064,17472,16949,18735,18935,16207,16307,16393,17970,17030,17639,16860,17988,17874,16158,18329,18215,15537,17167,17749,20144,20054,19128,17515,20041,20257,19207,23414,23602,20058],"type":"scatter","mode":"lines","name":"python","line":{"dash":null},"inherit":true},"32b82bc63a0e.1":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":[2009,2009.08333333333,2009.16666666667,2009.25,2009.33333333333,2009.41666666667,2009.5,2009.58333333333,2009.66666666667,2009.75,2009.83333333333,2009.91666666667,2010,2010.08333333333,2010.16666666667,2010.25,2010.33333333333,2010.41666666667,2010.5,2010.58333333333,2010.66666666667,2010.75,2010.83333333333,2010.91666666667,2011,2011.08333333333,2011.16666666667,2011.25,2011.33333333333,2011.41666666667,2011.5,2011.58333333333,2011.66666666667,2011.75,2011.83333333333,2011.91666666667,2012,2012.08333333333,2012.16666666667,2012.25,2012.33333333333,2012.41666666667,2012.5,2012.58333333333,2012.66666666667,2012.75,2012.83333333333,2012.91666666667,2013,2013.08333333333,2013.16666666667,2013.25,2013.33333333333,2013.41666666667,2013.5,2013.58333333333,2013.66666666667,2013.75,2013.83333333333,2013.91666666667,2014,2014.08333333333,2014.16666666667,2014.25,2014.33333333333,2014.41666666667,2014.5,2014.58333333333,2014.66666666667,2014.75,2014.83333333333,2014.91666666667,2015,2015.08333333333,2015.16666666667,2015.25,2015.33333333333,2015.41666666667,2015.5,2015.58333333333,2015.66666666667,2015.75,2015.83333333333,2015.91666666667,2016,2016.08333333333,2016.16666666667,2016.25,2016.33333333333,2016.41666666667,2016.5,2016.58333333333,2016.66666666667,2016.75,2016.83333333333,2016.91666666667,2017,2017.08333333333,2017.16666666667,2017.25,2017.33333333333,2017.41666666667,2017.5,2017.58333333333,2017.66666666667,2017.75,2017.83333333333,2017.91666666667,2018,2018.08333333333,2018.16666666667,2018.25,2018.33333333333,2018.41666666667,2018.5,2018.58333333333,2018.66666666667,2018.75,2018.83333333333,2018.91666666667,2019,2019.08333333333,2019.16666666667,2019.25,2019.33333333333,2019.41666666667,2019.5,2019.58333333333,2019.66666666667,2019.75,2019.83333333333,2019.91666666667],"y":[8,9,4,12,2,5,51,47,139,73,94,80,94,122,140,160,139,178,235,283,236,214,244,221,251,322,423,476,428,444,454,587,613,623,609,608,691,815,892,849,882,975,1125,1093,1061,1270,1348,1194,1515,1678,1858,1849,1795,1785,1980,1930,1723,2108,2194,1869,2366,2624,2830,2748,2603,2407,2654,2490,2385,2796,2727,2315,2717,2984,3581,3341,3440,3448,3999,3509,3349,3704,3556,3129,3561,3621,4075,4167,3822,3884,3768,3804,3318,3808,3585,3136,3519,3706,4637,4280,4349,4490,4611,5051,4641,5053,5117,4022,4209,4517,5112,4746,4738,4508,4417,4141,3809,4394,4278,3392,3997,4301,4552,4660,4359,4005,4265,4486,4474,5138,4883,4150],"type":"scatter","mode":"lines","name":"r","line":{"dash":null},"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"Year","showgrid":false},"yaxis":{"domain":[0,1],"automargin":true,"title":"# Questions","showgrid":false},"title":"Monthly questions on Stack Overflow platform","hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[2009,2009.08333333333,2009.16666666667,2009.25,2009.33333333333,2009.41666666667,2009.5,2009.58333333333,2009.66666666667,2009.75,2009.83333333333,2009.91666666667,2010,2010.08333333333,2010.16666666667,2010.25,2010.33333333333,2010.41666666667,2010.5,2010.58333333333,2010.66666666667,2010.75,2010.83333333333,2010.91666666667,2011,2011.08333333333,2011.16666666667,2011.25,2011.33333333333,2011.41666666667,2011.5,2011.58333333333,2011.66666666667,2011.75,2011.83333333333,2011.91666666667,2012,2012.08333333333,2012.16666666667,2012.25,2012.33333333333,2012.41666666667,2012.5,2012.58333333333,2012.66666666667,2012.75,2012.83333333333,2012.91666666667,2013,2013.08333333333,2013.16666666667,2013.25,2013.33333333333,2013.41666666667,2013.5,2013.58333333333,2013.66666666667,2013.75,2013.83333333333,2013.91666666667,2014,2014.08333333333,2014.16666666667,2014.25,2014.33333333333,2014.41666666667,2014.5,2014.58333333333,2014.66666666667,2014.75,2014.83333333333,2014.91666666667,2015,2015.08333333333,2015.16666666667,2015.25,2015.33333333333,2015.41666666667,2015.5,2015.58333333333,2015.66666666667,2015.75,2015.83333333333,2015.91666666667,2016,2016.08333333333,2016.16666666667,2016.25,2016.33333333333,2016.41666666667,2016.5,2016.58333333333,2016.66666666667,2016.75,2016.83333333333,2016.91666666667,2017,2017.08333333333,2017.16666666667,2017.25,2017.33333333333,2017.41666666667,2017.5,2017.58333333333,2017.66666666667,2017.75,2017.83333333333,2017.91666666667,2018,2018.08333333333,2018.16666666667,2018.25,2018.33333333333,2018.41666666667,2018.5,2018.58333333333,2018.66666666667,2018.75,2018.83333333333,2018.91666666667,2019,2019.08333333333,2019.16666666667,2019.25,2019.33333333333,2019.41666666667,2019.5,2019.58333333333,2019.66666666667,2019.75,2019.83333333333,2019.91666666667],"y":[631,633,766,768,1003,1046,1165,1143,1169,1424,1562,1552,1952,1872,2076,1817,2017,2214,2607,2498,2254,2671,2619,2441,2913,3024,3763,3359,3538,3485,3688,3849,3526,3639,3889,3555,4232,4517,5073,4948,5133,5295,5751,5882,5273,6154,6408,5636,6605,6793,7680,7975,7862,7640,8656,7974,7999,9539,9546,8306,9892,9951,11483,10839,9330,8967,9999,9170,8829,9651,9652,8886,9757,10264,11685,11522,11286,11887,12392,11296,11040,12578,12384,11446,12439,13334,14173,13775,13207,13009,12943,13006,12424,13616,14296,12889,14388,14901,17280,15752,16291,16173,17064,17472,16949,18735,18935,16207,16307,16393,17970,17030,17639,16860,17988,17874,16158,18329,18215,15537,17167,17749,20144,20054,19128,17515,20041,20257,19207,23414,23602,20058],"type":"scatter","mode":"lines","name":"python","line":{"color":"rgba(31,119,180,1)","dash":[]},"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2009,2009.08333333333,2009.16666666667,2009.25,2009.33333333333,2009.41666666667,2009.5,2009.58333333333,2009.66666666667,2009.75,2009.83333333333,2009.91666666667,2010,2010.08333333333,2010.16666666667,2010.25,2010.33333333333,2010.41666666667,2010.5,2010.58333333333,2010.66666666667,2010.75,2010.83333333333,2010.91666666667,2011,2011.08333333333,2011.16666666667,2011.25,2011.33333333333,2011.41666666667,2011.5,2011.58333333333,2011.66666666667,2011.75,2011.83333333333,2011.91666666667,2012,2012.08333333333,2012.16666666667,2012.25,2012.33333333333,2012.41666666667,2012.5,2012.58333333333,2012.66666666667,2012.75,2012.83333333333,2012.91666666667,2013,2013.08333333333,2013.16666666667,2013.25,2013.33333333333,2013.41666666667,2013.5,2013.58333333333,2013.66666666667,2013.75,2013.83333333333,2013.91666666667,2014,2014.08333333333,2014.16666666667,2014.25,2014.33333333333,2014.41666666667,2014.5,2014.58333333333,2014.66666666667,2014.75,2014.83333333333,2014.91666666667,2015,2015.08333333333,2015.16666666667,2015.25,2015.33333333333,2015.41666666667,2015.5,2015.58333333333,2015.66666666667,2015.75,2015.83333333333,2015.91666666667,2016,2016.08333333333,2016.16666666667,2016.25,2016.33333333333,2016.41666666667,2016.5,2016.58333333333,2016.66666666667,2016.75,2016.83333333333,2016.91666666667,2017,2017.08333333333,2017.16666666667,2017.25,2017.33333333333,2017.41666666667,2017.5,2017.58333333333,2017.66666666667,2017.75,2017.83333333333,2017.91666666667,2018,2018.08333333333,2018.16666666667,2018.25,2018.33333333333,2018.41666666667,2018.5,2018.58333333333,2018.66666666667,2018.75,2018.83333333333,2018.91666666667,2019,2019.08333333333,2019.16666666667,2019.25,2019.33333333333,2019.41666666667,2019.5,2019.58333333333,2019.66666666667,2019.75,2019.83333333333,2019.91666666667],"y":[8,9,4,12,2,5,51,47,139,73,94,80,94,122,140,160,139,178,235,283,236,214,244,221,251,322,423,476,428,444,454,587,613,623,609,608,691,815,892,849,882,975,1125,1093,1061,1270,1348,1194,1515,1678,1858,1849,1795,1785,1980,1930,1723,2108,2194,1869,2366,2624,2830,2748,2603,2407,2654,2490,2385,2796,2727,2315,2717,2984,3581,3341,3440,3448,3999,3509,3349,3704,3556,3129,3561,3621,4075,4167,3822,3884,3768,3804,3318,3808,3585,3136,3519,3706,4637,4280,4349,4490,4611,5051,4641,5053,5117,4022,4209,4517,5112,4746,4738,4508,4417,4141,3809,4394,4278,3392,3997,4301,4552,4660,4359,4005,4265,4486,4474,5138,4883,4150],"type":"scatter","mode":"lines","name":"r","line":{"color":"rgba(255,127,14,1)","dash":[]},"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>The time series doesn’t have a seasonal pattern, but it’s possible to see some cyclicality in both time series.</p>
</div>
</div>
<div id="lags-analysis-i" class="section level1">
<h1>Lags Analysis I</h1>
<p>The TSstudio package doesn’t have any function to plot the ACF and PACF measures, and for that, we use the built-in functions acf and pacf. The downside here, for me, is that the object generated by these functions is not a ggplot2 object, and we lose all beautiful features from the grammar of graphics.</p>
<p>Obviously, you can go through the data and try to plot in the ggplot2 by yourself but will be a little burdensome.</p>
<p>For R time series:</p>
<pre class="r"><code>par(mfrow = c(1, 2))
# acf R time series
stackOverflow_ts[, c(&quot;r&quot;)] %&gt;% 
  acf(lag.max = 300, 
      main = &quot;Autocorrelation Plot - R&quot;)

# pacf R time series
stackOverflow_ts[, c(&quot;r&quot;)] %&gt;%
  pacf(lag.max = 300,
       main = &quot;Partial Autocorrelation Plot - R&quot;)</code></pre>
<p><img src="index_files/figure-html/vis_lag_analysis_r-1.png" width="672" /></p>
<p>For Python time series:</p>
<pre class="r"><code>par(mfrow = c(1, 2))
# acf Python time series
stackOverflow_ts[, c(&quot;python&quot;)] %&gt;% 
  acf(lag.max = 300,
      main = &quot;Autocorrelation Plot - Python&quot;)

# pacf Python time series
stackOverflow_ts[, c(&quot;python&quot;)] %&gt;%
  pacf(lag.max = 300,
       main = &quot;Python Autocorrelation Plot - Python&quot;)</code></pre>
<p><img src="index_files/figure-html/vis_lag_analysis_python-1.png" width="672" /></p>
<p>In all graphics we have similar characteristics that need explanation:</p>
<ul>
<li>blue lines: These lines are referent to a significance interval, the bars that run through these lines have statistical meaning.</li>
<li>y-axis: Correlation scores.</li>
<li>x-axis: Here we have the indication of the lags. Each lag corresponds 12 months, so, almost 11 lags.</li>
</ul>
<p>Note that looking at ACF plots, both for R and Python time series, we have a greater correlation with more recent lags, which is lost over time. With more distant lags it is possible to see that we have a negative correlation with recent data.</p>
<p>The Partial Autocorrelation is a little different, this “partial” correlation between two variables is the amount of correlation between them which is not explained by their mutual correlations with a specified set of other variables.</p>
<p>For example, if we are regressing a variable Y on other variables X1, X2, and X3, the partial correlation between Y and X3 is the amount of correlation between Y and X3 that is not explained by their common correlations with X1 and X2.</p>
<p>To summarize, when we look at the PACF plot, we want to know each lag that has relevant information to use as a predictor in a future forecast. How much greater the PACF score, the better.</p>
<p>And, in our plots, we see that both time series have one lag (closer to lag 1) that may be useful.</p>
<p>Just know which correlation score has the higher score is not enough, it’s important to see visually how these points are distributed. In that, TSstudio has a great interactive function, called ts_lags.</p>
<pre class="r"><code># Looking at lag plots
ts_lags(stackOverflow_ts,
        lags = c(2, 20, 30, 40, 50, 80)) %&gt;% # choosing what lags to plot
  layout(title = &quot;Series vs Lags&quot;)</code></pre>
<pre><code>## Warning in ts_lags(stackOverflow_ts, lags = c(2, 20, 30, 40, 50, 80)): The &#39;ts.obj&#39; has multiple columns, only the first column will be plot</code></pre>
<div id="htmlwidget-3ee8fac0796646881605" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-3ee8fac0796646881605">{"x":{"data":[{"x":[631,633,766,768,1003,1046,1165,1143,1169,1424,1562,1552,1952,1872,2076,1817,2017,2214,2607,2498,2254,2671,2619,2441,2913,3024,3763,3359,3538,3485,3688,3849,3526,3639,3889,3555,4232,4517,5073,4948,5133,5295,5751,5882,5273,6154,6408,5636,6605,6793,7680,7975,7862,7640,8656,7974,7999,9539,9546,8306,9892,9951,11483,10839,9330,8967,9999,9170,8829,9651,9652,8886,9757,10264,11685,11522,11286,11887,12392,11296,11040,12578,12384,11446,12439,13334,14173,13775,13207,13009,12943,13006,12424,13616,14296,12889,14388,14901,17280,15752,16291,16173,17064,17472,16949,18735,18935,16207,16307,16393,17970,17030,17639,16860,17988,17874,16158,18329,18215,15537,17167,17749,20144,20054,19128,17515,20041,20257,19207,23414],"y":[766,768,1003,1046,1165,1143,1169,1424,1562,1552,1952,1872,2076,1817,2017,2214,2607,2498,2254,2671,2619,2441,2913,3024,3763,3359,3538,3485,3688,3849,3526,3639,3889,3555,4232,4517,5073,4948,5133,5295,5751,5882,5273,6154,6408,5636,6605,6793,7680,7975,7862,7640,8656,7974,7999,9539,9546,8306,9892,9951,11483,10839,9330,8967,9999,9170,8829,9651,9652,8886,9757,10264,11685,11522,11286,11887,12392,11296,11040,12578,12384,11446,12439,13334,14173,13775,13207,13009,12943,13006,12424,13616,14296,12889,14388,14901,17280,15752,16291,16173,17064,17472,16949,18735,18935,16207,16307,16393,17970,17030,17639,16860,17988,17874,16158,18329,18215,15537,17167,17749,20144,20054,19128,17515,20041,20257,19207,23414,23602,20058],"mode":"markers","type":"scatter","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[631,633,766,768,1003,1046,1165,1143,1169,1424,1562,1552,1952,1872,2076,1817,2017,2214,2607,2498,2254,2671,2619,2441,2913,3024,3763,3359,3538,3485,3688,3849,3526,3639,3889,3555,4232,4517,5073,4948,5133,5295,5751,5882,5273,6154,6408,5636,6605,6793,7680,7975,7862,7640,8656,7974,7999,9539,9546,8306,9892,9951,11483,10839,9330,8967,9999,9170,8829,9651,9652,8886,9757,10264,11685,11522,11286,11887,12392,11296,11040,12578,12384,11446,12439,13334,14173,13775,13207,13009,12943,13006,12424,13616,14296,12889,14388,14901,17280,15752,16291,16173,17064,17472,16949,18735,18935,16207,16307,16393,17970,17030],"y":[2254,2671,2619,2441,2913,3024,3763,3359,3538,3485,3688,3849,3526,3639,3889,3555,4232,4517,5073,4948,5133,5295,5751,5882,5273,6154,6408,5636,6605,6793,7680,7975,7862,7640,8656,7974,7999,9539,9546,8306,9892,9951,11483,10839,9330,8967,9999,9170,8829,9651,9652,8886,9757,10264,11685,11522,11286,11887,12392,11296,11040,12578,12384,11446,12439,13334,14173,13775,13207,13009,12943,13006,12424,13616,14296,12889,14388,14901,17280,15752,16291,16173,17064,17472,16949,18735,18935,16207,16307,16393,17970,17030,17639,16860,17988,17874,16158,18329,18215,15537,17167,17749,20144,20054,19128,17515,20041,20257,19207,23414,23602,20058],"mode":"markers","type":"scatter","marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"line":{"color":"rgba(255,127,14,1)"},"xaxis":"x2","yaxis":"y","frame":null},{"x":[631,633,766,768,1003,1046,1165,1143,1169,1424,1562,1552,1952,1872,2076,1817,2017,2214,2607,2498,2254,2671,2619,2441,2913,3024,3763,3359,3538,3485,3688,3849,3526,3639,3889,3555,4232,4517,5073,4948,5133,5295,5751,5882,5273,6154,6408,5636,6605,6793,7680,7975,7862,7640,8656,7974,7999,9539,9546,8306,9892,9951,11483,10839,9330,8967,9999,9170,8829,9651,9652,8886,9757,10264,11685,11522,11286,11887,12392,11296,11040,12578,12384,11446,12439,13334,14173,13775,13207,13009,12943,13006,12424,13616,14296,12889,14388,14901,17280,15752,16291,16173],"y":[3688,3849,3526,3639,3889,3555,4232,4517,5073,4948,5133,5295,5751,5882,5273,6154,6408,5636,6605,6793,7680,7975,7862,7640,8656,7974,7999,9539,9546,8306,9892,9951,11483,10839,9330,8967,9999,9170,8829,9651,9652,8886,9757,10264,11685,11522,11286,11887,12392,11296,11040,12578,12384,11446,12439,13334,14173,13775,13207,13009,12943,13006,12424,13616,14296,12889,14388,14901,17280,15752,16291,16173,17064,17472,16949,18735,18935,16207,16307,16393,17970,17030,17639,16860,17988,17874,16158,18329,18215,15537,17167,17749,20144,20054,19128,17515,20041,20257,19207,23414,23602,20058],"mode":"markers","type":"scatter","marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"line":{"color":"rgba(44,160,44,1)"},"xaxis":"x3","yaxis":"y","frame":null},{"x":[631,633,766,768,1003,1046,1165,1143,1169,1424,1562,1552,1952,1872,2076,1817,2017,2214,2607,2498,2254,2671,2619,2441,2913,3024,3763,3359,3538,3485,3688,3849,3526,3639,3889,3555,4232,4517,5073,4948,5133,5295,5751,5882,5273,6154,6408,5636,6605,6793,7680,7975,7862,7640,8656,7974,7999,9539,9546,8306,9892,9951,11483,10839,9330,8967,9999,9170,8829,9651,9652,8886,9757,10264,11685,11522,11286,11887,12392,11296,11040,12578,12384,11446,12439,13334,14173,13775,13207,13009,12943,13006],"y":[5133,5295,5751,5882,5273,6154,6408,5636,6605,6793,7680,7975,7862,7640,8656,7974,7999,9539,9546,8306,9892,9951,11483,10839,9330,8967,9999,9170,8829,9651,9652,8886,9757,10264,11685,11522,11286,11887,12392,11296,11040,12578,12384,11446,12439,13334,14173,13775,13207,13009,12943,13006,12424,13616,14296,12889,14388,14901,17280,15752,16291,16173,17064,17472,16949,18735,18935,16207,16307,16393,17970,17030,17639,16860,17988,17874,16158,18329,18215,15537,17167,17749,20144,20054,19128,17515,20041,20257,19207,23414,23602,20058],"mode":"markers","type":"scatter","marker":{"color":"rgba(214,39,40,1)","line":{"color":"rgba(214,39,40,1)"}},"error_y":{"color":"rgba(214,39,40,1)"},"error_x":{"color":"rgba(214,39,40,1)"},"line":{"color":"rgba(214,39,40,1)"},"xaxis":"x","yaxis":"y2","frame":null},{"x":[631,633,766,768,1003,1046,1165,1143,1169,1424,1562,1552,1952,1872,2076,1817,2017,2214,2607,2498,2254,2671,2619,2441,2913,3024,3763,3359,3538,3485,3688,3849,3526,3639,3889,3555,4232,4517,5073,4948,5133,5295,5751,5882,5273,6154,6408,5636,6605,6793,7680,7975,7862,7640,8656,7974,7999,9539,9546,8306,9892,9951,11483,10839,9330,8967,9999,9170,8829,9651,9652,8886,9757,10264,11685,11522,11286,11887,12392,11296,11040,12578],"y":[7680,7975,7862,7640,8656,7974,7999,9539,9546,8306,9892,9951,11483,10839,9330,8967,9999,9170,8829,9651,9652,8886,9757,10264,11685,11522,11286,11887,12392,11296,11040,12578,12384,11446,12439,13334,14173,13775,13207,13009,12943,13006,12424,13616,14296,12889,14388,14901,17280,15752,16291,16173,17064,17472,16949,18735,18935,16207,16307,16393,17970,17030,17639,16860,17988,17874,16158,18329,18215,15537,17167,17749,20144,20054,19128,17515,20041,20257,19207,23414,23602,20058],"mode":"markers","type":"scatter","marker":{"color":"rgba(148,103,189,1)","line":{"color":"rgba(148,103,189,1)"}},"error_y":{"color":"rgba(148,103,189,1)"},"error_x":{"color":"rgba(148,103,189,1)"},"line":{"color":"rgba(148,103,189,1)"},"xaxis":"x2","yaxis":"y2","frame":null},{"x":[631,633,766,768,1003,1046,1165,1143,1169,1424,1562,1552,1952,1872,2076,1817,2017,2214,2607,2498,2254,2671,2619,2441,2913,3024,3763,3359,3538,3485,3688,3849,3526,3639,3889,3555,4232,4517,5073,4948,5133,5295,5751,5882,5273,6154,6408,5636,6605,6793,7680,7975],"y":[11040,12578,12384,11446,12439,13334,14173,13775,13207,13009,12943,13006,12424,13616,14296,12889,14388,14901,17280,15752,16291,16173,17064,17472,16949,18735,18935,16207,16307,16393,17970,17030,17639,16860,17988,17874,16158,18329,18215,15537,17167,17749,20144,20054,19128,17515,20041,20257,19207,23414,23602,20058],"mode":"markers","type":"scatter","marker":{"color":"rgba(140,86,75,1)","line":{"color":"rgba(140,86,75,1)"}},"error_y":{"color":"rgba(140,86,75,1)"},"error_x":{"color":"rgba(140,86,75,1)"},"line":{"color":"rgba(140,86,75,1)"},"xaxis":"x3","yaxis":"y2","frame":null}],"layout":{"xaxis":{"domain":[0,0.313333333333333],"automargin":true,"title":"","range":[631,23602],"anchor":"y2"},"xaxis2":{"domain":[0.353333333333333,0.646666666666667],"automargin":true,"title":"","range":[631,23602],"anchor":"y2"},"xaxis3":{"domain":[0.686666666666667,1],"automargin":true,"title":"","range":[631,23602],"anchor":"y2"},"yaxis2":{"domain":[0,0.48],"automargin":true,"range":[631,23602],"title":[],"anchor":"x"},"yaxis":{"domain":[0.52,1],"automargin":true,"range":[631,23602],"title":[],"anchor":"x"},"annotations":[{"text":"Lag 2","xref":"paper","yref":"paper","yanchor":"bottom","xanchor":"center","align":"center","x":0.156666666666667,"y":0.952,"showarrow":false},{"text":"Lag 20","xref":"paper","yref":"paper","yanchor":"bottom","xanchor":"center","align":"center","x":0.5,"y":0.952,"showarrow":false},{"text":"Lag 30","xref":"paper","yref":"paper","yanchor":"bottom","xanchor":"center","align":"center","x":0.843333333333333,"y":0.952,"showarrow":false},{"text":"Lag 40","xref":"paper","yref":"paper","yanchor":"bottom","xanchor":"center","align":"center","x":0.156666666666667,"y":0.432,"showarrow":false},{"text":"Lag 50","xref":"paper","yref":"paper","yanchor":"bottom","xanchor":"center","align":"center","x":0.5,"y":0.432,"showarrow":false},{"text":"Lag 80","xref":"paper","yref":"paper","yanchor":"bottom","xanchor":"center","align":"center","x":0.843333333333333,"y":0.432,"showarrow":false}],"shapes":[],"images":[],"margin":{"b":40,"l":60,"t":25,"r":10},"hovermode":"closest","showlegend":false,"title":"Series vs Lags"},"attrs":{"32b841fd32b0":{"x":[null,null,631,633,766,768,1003,1046,1165,1143,1169,1424,1562,1552,1952,1872,2076,1817,2017,2214,2607,2498,2254,2671,2619,2441,2913,3024,3763,3359,3538,3485,3688,3849,3526,3639,3889,3555,4232,4517,5073,4948,5133,5295,5751,5882,5273,6154,6408,5636,6605,6793,7680,7975,7862,7640,8656,7974,7999,9539,9546,8306,9892,9951,11483,10839,9330,8967,9999,9170,8829,9651,9652,8886,9757,10264,11685,11522,11286,11887,12392,11296,11040,12578,12384,11446,12439,13334,14173,13775,13207,13009,12943,13006,12424,13616,14296,12889,14388,14901,17280,15752,16291,16173,17064,17472,16949,18735,18935,16207,16307,16393,17970,17030,17639,16860,17988,17874,16158,18329,18215,15537,17167,17749,20144,20054,19128,17515,20041,20257,19207,23414],"y":[631,633,766,768,1003,1046,1165,1143,1169,1424,1562,1552,1952,1872,2076,1817,2017,2214,2607,2498,2254,2671,2619,2441,2913,3024,3763,3359,3538,3485,3688,3849,3526,3639,3889,3555,4232,4517,5073,4948,5133,5295,5751,5882,5273,6154,6408,5636,6605,6793,7680,7975,7862,7640,8656,7974,7999,9539,9546,8306,9892,9951,11483,10839,9330,8967,9999,9170,8829,9651,9652,8886,9757,10264,11685,11522,11286,11887,12392,11296,11040,12578,12384,11446,12439,13334,14173,13775,13207,13009,12943,13006,12424,13616,14296,12889,14388,14901,17280,15752,16291,16173,17064,17472,16949,18735,18935,16207,16307,16393,17970,17030,17639,16860,17988,17874,16158,18329,18215,15537,17167,17749,20144,20054,19128,17515,20041,20257,19207,23414,23602,20058],"mode":"markers","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"32b81e644668":{"x":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,631,633,766,768,1003,1046,1165,1143,1169,1424,1562,1552,1952,1872,2076,1817,2017,2214,2607,2498,2254,2671,2619,2441,2913,3024,3763,3359,3538,3485,3688,3849,3526,3639,3889,3555,4232,4517,5073,4948,5133,5295,5751,5882,5273,6154,6408,5636,6605,6793,7680,7975,7862,7640,8656,7974,7999,9539,9546,8306,9892,9951,11483,10839,9330,8967,9999,9170,8829,9651,9652,8886,9757,10264,11685,11522,11286,11887,12392,11296,11040,12578,12384,11446,12439,13334,14173,13775,13207,13009,12943,13006,12424,13616,14296,12889,14388,14901,17280,15752,16291,16173,17064,17472,16949,18735,18935,16207,16307,16393,17970,17030],"y":[631,633,766,768,1003,1046,1165,1143,1169,1424,1562,1552,1952,1872,2076,1817,2017,2214,2607,2498,2254,2671,2619,2441,2913,3024,3763,3359,3538,3485,3688,3849,3526,3639,3889,3555,4232,4517,5073,4948,5133,5295,5751,5882,5273,6154,6408,5636,6605,6793,7680,7975,7862,7640,8656,7974,7999,9539,9546,8306,9892,9951,11483,10839,9330,8967,9999,9170,8829,9651,9652,8886,9757,10264,11685,11522,11286,11887,12392,11296,11040,12578,12384,11446,12439,13334,14173,13775,13207,13009,12943,13006,12424,13616,14296,12889,14388,14901,17280,15752,16291,16173,17064,17472,16949,18735,18935,16207,16307,16393,17970,17030,17639,16860,17988,17874,16158,18329,18215,15537,17167,17749,20144,20054,19128,17515,20041,20257,19207,23414,23602,20058],"mode":"markers","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"32b8155322a":{"x":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,631,633,766,768,1003,1046,1165,1143,1169,1424,1562,1552,1952,1872,2076,1817,2017,2214,2607,2498,2254,2671,2619,2441,2913,3024,3763,3359,3538,3485,3688,3849,3526,3639,3889,3555,4232,4517,5073,4948,5133,5295,5751,5882,5273,6154,6408,5636,6605,6793,7680,7975,7862,7640,8656,7974,7999,9539,9546,8306,9892,9951,11483,10839,9330,8967,9999,9170,8829,9651,9652,8886,9757,10264,11685,11522,11286,11887,12392,11296,11040,12578,12384,11446,12439,13334,14173,13775,13207,13009,12943,13006,12424,13616,14296,12889,14388,14901,17280,15752,16291,16173],"y":[631,633,766,768,1003,1046,1165,1143,1169,1424,1562,1552,1952,1872,2076,1817,2017,2214,2607,2498,2254,2671,2619,2441,2913,3024,3763,3359,3538,3485,3688,3849,3526,3639,3889,3555,4232,4517,5073,4948,5133,5295,5751,5882,5273,6154,6408,5636,6605,6793,7680,7975,7862,7640,8656,7974,7999,9539,9546,8306,9892,9951,11483,10839,9330,8967,9999,9170,8829,9651,9652,8886,9757,10264,11685,11522,11286,11887,12392,11296,11040,12578,12384,11446,12439,13334,14173,13775,13207,13009,12943,13006,12424,13616,14296,12889,14388,14901,17280,15752,16291,16173,17064,17472,16949,18735,18935,16207,16307,16393,17970,17030,17639,16860,17988,17874,16158,18329,18215,15537,17167,17749,20144,20054,19128,17515,20041,20257,19207,23414,23602,20058],"mode":"markers","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"32b82271b4e":{"x":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,631,633,766,768,1003,1046,1165,1143,1169,1424,1562,1552,1952,1872,2076,1817,2017,2214,2607,2498,2254,2671,2619,2441,2913,3024,3763,3359,3538,3485,3688,3849,3526,3639,3889,3555,4232,4517,5073,4948,5133,5295,5751,5882,5273,6154,6408,5636,6605,6793,7680,7975,7862,7640,8656,7974,7999,9539,9546,8306,9892,9951,11483,10839,9330,8967,9999,9170,8829,9651,9652,8886,9757,10264,11685,11522,11286,11887,12392,11296,11040,12578,12384,11446,12439,13334,14173,13775,13207,13009,12943,13006],"y":[631,633,766,768,1003,1046,1165,1143,1169,1424,1562,1552,1952,1872,2076,1817,2017,2214,2607,2498,2254,2671,2619,2441,2913,3024,3763,3359,3538,3485,3688,3849,3526,3639,3889,3555,4232,4517,5073,4948,5133,5295,5751,5882,5273,6154,6408,5636,6605,6793,7680,7975,7862,7640,8656,7974,7999,9539,9546,8306,9892,9951,11483,10839,9330,8967,9999,9170,8829,9651,9652,8886,9757,10264,11685,11522,11286,11887,12392,11296,11040,12578,12384,11446,12439,13334,14173,13775,13207,13009,12943,13006,12424,13616,14296,12889,14388,14901,17280,15752,16291,16173,17064,17472,16949,18735,18935,16207,16307,16393,17970,17030,17639,16860,17988,17874,16158,18329,18215,15537,17167,17749,20144,20054,19128,17515,20041,20257,19207,23414,23602,20058],"mode":"markers","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"32b84f45dbe":{"x":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,631,633,766,768,1003,1046,1165,1143,1169,1424,1562,1552,1952,1872,2076,1817,2017,2214,2607,2498,2254,2671,2619,2441,2913,3024,3763,3359,3538,3485,3688,3849,3526,3639,3889,3555,4232,4517,5073,4948,5133,5295,5751,5882,5273,6154,6408,5636,6605,6793,7680,7975,7862,7640,8656,7974,7999,9539,9546,8306,9892,9951,11483,10839,9330,8967,9999,9170,8829,9651,9652,8886,9757,10264,11685,11522,11286,11887,12392,11296,11040,12578],"y":[631,633,766,768,1003,1046,1165,1143,1169,1424,1562,1552,1952,1872,2076,1817,2017,2214,2607,2498,2254,2671,2619,2441,2913,3024,3763,3359,3538,3485,3688,3849,3526,3639,3889,3555,4232,4517,5073,4948,5133,5295,5751,5882,5273,6154,6408,5636,6605,6793,7680,7975,7862,7640,8656,7974,7999,9539,9546,8306,9892,9951,11483,10839,9330,8967,9999,9170,8829,9651,9652,8886,9757,10264,11685,11522,11286,11887,12392,11296,11040,12578,12384,11446,12439,13334,14173,13775,13207,13009,12943,13006,12424,13616,14296,12889,14388,14901,17280,15752,16291,16173,17064,17472,16949,18735,18935,16207,16307,16393,17970,17030,17639,16860,17988,17874,16158,18329,18215,15537,17167,17749,20144,20054,19128,17515,20041,20257,19207,23414,23602,20058],"mode":"markers","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"32b869622fbc":{"x":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,631,633,766,768,1003,1046,1165,1143,1169,1424,1562,1552,1952,1872,2076,1817,2017,2214,2607,2498,2254,2671,2619,2441,2913,3024,3763,3359,3538,3485,3688,3849,3526,3639,3889,3555,4232,4517,5073,4948,5133,5295,5751,5882,5273,6154,6408,5636,6605,6793,7680,7975],"y":[631,633,766,768,1003,1046,1165,1143,1169,1424,1562,1552,1952,1872,2076,1817,2017,2214,2607,2498,2254,2671,2619,2441,2913,3024,3763,3359,3538,3485,3688,3849,3526,3639,3889,3555,4232,4517,5073,4948,5133,5295,5751,5882,5273,6154,6408,5636,6605,6793,7680,7975,7862,7640,8656,7974,7999,9539,9546,8306,9892,9951,11483,10839,9330,8967,9999,9170,8829,9651,9652,8886,9757,10264,11685,11522,11286,11887,12392,11296,11040,12578,12384,11446,12439,13334,14173,13775,13207,13009,12943,13006,12424,13616,14296,12889,14388,14901,17280,15752,16291,16173,17064,17472,16949,18735,18935,16207,16307,16393,17970,17030,17639,16860,17988,17874,16158,18329,18215,15537,17167,17749,20144,20054,19128,17515,20041,20257,19207,23414,23602,20058],"mode":"markers","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"subplot":true,".hideLegend":true,"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="causality-analysis-i" class="section level1">
<h1>Causality analysis I</h1>
<p>Just look at the past pattern within the series is not always a good idea. The main pitfall of this method is that it will fail whenever the changes in the series derive from the exogenous factors. The goal of causality analysis, in the context of time series analysis, is to identify whether a causality relationship exists between the series we wish to forecast other potential exogenous factors.</p>
<p>Be careful about the fact that correlation doesn’t imply causation, we just looking for something that could help the forecast model. In our current case, we just can see if exist some lag in R time series correlated to Python time series.</p>
<pre class="r"><code># ccf time series
par(mfrow=c(1,1))
ccf(stackOverflow_ts[, c(&quot;r&quot;)], stackOverflow_ts[, c(&quot;python&quot;)], 
    lag.max = 300,
    main = &quot;Cros-Correlation Plot&quot;,
    ylab = &quot;CCF&quot;)</code></pre>
<p><img src="index_files/figure-html/ccf_ts-1.png" width="672" /></p>
<p>We see that the higher score is in the recent lags, and some scores between 5 and 10 have a negative relationship.</p>
<p>The graphic is saying to us that currently (at the date of the dataset) the growth of R questions is highly correlated to Python questions.</p>
<p>#Second Approach</p>
<p>This second approach uses what is called tsibble, like a tibble with an implicit date index. So, let’s convert our tibble to a tsibble.</p>
<p>Differently of what we did before, here the data was converted to a long format, better to plot.</p>
<p>Looking at the object created, we see the indication of an interval of these observations [1M] (monthly). And also, we see the key variable, that it’s a way to indicate how many time series exist in this object. It’s possible to have different combinations of features to do a new time series in the object.</p>
<p>As we have the objects ready, we can now perform the correlation analysis by this second approach. Attempt that the graphic interpretation was already made, and here I’ll just explain the difference between the methods.</p>
<p>##Lag Analysis II</p>
<p>Unlike TSstudio, we do not have interactivity plots, all plots are static, but they are objects of ggplot2 and allow us to use the concepts of the grammar of graphics.</p>
<p>A problem with these functions is that they may behave differently than expected. Plugging the data to the acf and pacf functions, we are able to automatically see the faceted plots between all time series within the object. But if we try to simply visualize the series over time, it will not be possible to facet. It’s not a big problem, and you can plot using ggplot normally (see the code).</p>
<pre class="r"><code># looking at the data
stackoverflow_prep_tsbl %&gt;% 
  feasts::autoplot()</code></pre>
<pre><code>## Plot variable not specified, automatically selected `.vars = value`</code></pre>
<p><img src="index_files/figure-html/ts_tibble-1.png" width="672" /></p>
<pre class="r"><code># looking at the data facet way
stackoverflow_prep_tsbl %&gt;% 
  ggplot(aes(x = date,
             y = value,
             color = names)) + 
  geom_line() +
  facet_wrap(~names, scales = &quot;free_y&quot;)</code></pre>
<p><img src="index_files/figure-html/ts_tibble_facet-1.png" width="672" /></p>
<pre class="r"><code># lag plots
stackoverflow_prep_tsbl %&gt;% 
  filter(names == &quot;python&quot;) %&gt;% 
  gg_lag(value, geom=&quot;point&quot;)</code></pre>
<p><img src="index_files/figure-html/ts_tibble_lag_plot-1.png" width="672" /></p>
<pre class="r"><code># acf
stackoverflow_prep_tsbl %&gt;% 
  ACF(value, lag_max = 300) %&gt;% 
  autoplot()</code></pre>
<p><img src="index_files/figure-html/ts_tibble_acf-1.png" width="672" /></p>
<pre class="r"><code># pacf 
stackoverflow_prep_tsbl %&gt;% 
  PACF(value, lag_max = 300) %&gt;% 
  autoplot()</code></pre>
<p><img src="index_files/figure-html/ts_tibble_pacf-1.png" width="672" /> # Casuality Analysis II</p>
<pre class="r"><code># ccf
stackoverflow_prep_tsbl %&gt;% 
  pivot_wider(names_from = names, values_from = value) %&gt;% 
  CCF(python, r, lag_max = 300) %&gt;% 
  autoplot()</code></pre>
<p><img src="index_files/figure-html/ccf-1.png" width="672" /></p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
